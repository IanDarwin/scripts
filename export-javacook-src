#!/bin/sh 

# Export javasrc (and jabadot, since it's used several places in Java Cookbook)

set -x

cd /tmp

for dir in javacook javasrc
do
	if [ -d ${dir} ]; then
		mv ${dir} ${dir}-$$
		rm -rf ${dir}-$$ &
	fi
done

cvs -d /cvs export -D now javacook-src src/jabadot

mv javasrc javacook

mv src/jabadot javacook/jabadot

# Remove any private gunk
(cd javacook; rm com.darwinsys.util/upload)

# Update the index.html for just what we exported
(cd javacook; java MkIndex)

# Build simple makefiles where needed.
make makefiles

rm -f javacooksrc.zip
fastjar cvf javacooksrc.zip ./javacook

scp javacooksrc.zip darwinsys.com:/www/javacook/
