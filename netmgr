#!/bin/ksh

# Since I work on a bunch of machines, this script is a shortcut for
# setting the hostname.wireless to the correct one

WAIT=50	# 	5.0 seconds

[ -w / ] || {
	echo be root to try $0
	exit 1
}

cd /etc

function showit {
	if [ -f hostname.wireless ]; then
		ls -l hostname.wireless
	fi
}
showit

oldPS3=PS3
PS3="Which wireless?"
STTY="`stty -g`"
stty intr '' -icanon min 0 time $WAIT ignbrk -brkint -ixon isig
select host in None $(cd /home/ian/.wifi; ls -d * | grep -v CVS)
do
	echo "==> host = ${host}"
	case ${host} in
	0)	break;; # do nothing
	n|None)	echo Make yourself scarce
		rm -f hostname.wireless
		break;;
	*)	echo You\'re at ${host}, eh?
		ln -sf /home/ian/.wifi/${host} hostname.wireless
		break;;
	esac
done
stty $STTY
PS3=oldPS3
showit
